resources:
  repositories:
  - repository: azure_template
    type: github
    name: bernardopacini/.azure
    endpoint: bernardopacini

pool:
    vmImage: 'ubuntu-latest'

extends:
  template: azure_extend.yaml@azure_template
  parameters:
    REPO_NAME: pyspline
    COMPLEX: true
    GCC_CONFIG: config/defaults/config.LINUX_GFORTRAN.mk
    INTEL_CONFIG: config/defaults/config.LINUX_INTEL.mk
    INPUT_FILES: false
    STYLE_CHECK: true
    STEPS_MAKE_REAL: make
    STEPS_INSTALL_REAL: pip install .
    STEPS_TEST_REAL: testflo -v . -n 1
    STEPS_MAKE_COMPLEX: make && make -f Makefile_CS PETSC_ARCH=complex-opt-\$COMPILERS-\$PETSCVERSION
    STEPS_INSTALL_COMPLEX: pip install .
    STEPS_TEST_COMPLEX: testflo -v . -n 1