resources:
  repositories:
  - repository: azure_template
    type: github
    name: bernardopacini/.azure
    endpoint: bernardopacini

pool:
    vmImage: 'ubuntu-latest'

extends:
  template: azure_extend.yaml@azure_template
  parameters:
    REPO_NAME: pyspline
    COMPLEX: false
    GCC_CONFIG: config/defaults/config.LINUX_GFORTRAN.mk
    INTEL_CONFIG: config/defaults/config.LINUX_INTEL.mk
    INPUT_FILES: false
    STYLE_CHECK: true
    STEPS_MAKE: make
    STEPS_INSTALL: pip install .
    STEPS_TEST: testflo -v . -n 1

 


# - job:
#   - template: matrix.yaml@azure_template
#   # strategy:
#   #   matrix: ${{ parameters.TestMatrix }}
#   steps:
#   - script: echo here
    # script: echo {{ parameters.TestMatrix }}
    # - template: before-install.yaml@azure_template
  #   parameters: 
  #     REPO_NAME: ${{ variables.REPO_NAME }}
  #     COMPLEX: ${{ variables.COMPLEX }}
  #     GCC_CONFIG: ${{ variables.GCC_CONFIG }}
  #     INTEL_CONFIG: ${{ variables.INTEL_CONFIG }}
  #     INPUT_FILES: ${{ variables.INPUT_FILES }}
  #     STYLE_CHECK: ${{ variables.STYLE_CHECK }}

  # - template: style_check.yaml@azure_template
  #   parameters:
  #     REPO_NAME: ${{ variables.REPO_NAME }}
  #     STYLE_CHECK: ${{ variables.STYLE_CHECK }}

